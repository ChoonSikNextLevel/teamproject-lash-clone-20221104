<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800,300italic,400italic,600italic,700italic,800italic%7CRoboto:400,900italic,700italic,500italic,400italic,300italic,100italic,900,700,500,300,100%7CLato:400,100,300,700,900,300italic,400italic,700italic,900italic,100italic%7CRoboto+Condensed:400,700italic,400italic,300italic,700,300%7CRaleway:400,900italic,800italic,700italic,600italic,500italic,400italic,300italic,200italic,100italic,800,900,700,600,500,300,200,100%7CNoto+Sans:400,700,400italic,700italic"
        rel="stylesheet" type="text/css">
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap"
        rel="stylesheet">

    <title>HUNTER C1 | 래쉬 안경테</title>
    <link href="//db.onlinewebfonts.com/c/2a2b767302dad0d292294c13d63a0c5f?family=DIN2014-Regular" rel="stylesheet"
        type="text/css" />

    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <!-- <script type="text/javascript" src="https://cdn.iamport.kr/js/iamport.payment-{SDK-최신버전}.js"></script>  -->
    <script type="text/javascript" src="https://cdn.iamport.kr/js/iamport.payment-1.2.0.js"></script>
    <script src="/static/js/page_main/js/jquery.nicescroll.min.js" type="text/javascript"></SCRIPT>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/page_main/header.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
        integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="shortcut icon" href="/static/images/Brand_img/favicon_img.ico">
    <link rel="stylesheet" href="/static/css/page_product/product_detail.css">

</head>

<body>
    <div class="overlay"></div>
    <header id="header">
        <div class="header-container">
            <div class="header-flex">
                <div class="header-left-container">
                    <div class="menu-container">
                        <div class="site-nav-menu">
                            <div class="site-nav-parent">
                                <a href="" class="menu-product">제품</a>
                            </div>
                            <nav class="nav-invisible">
                                <div class="site-nav-mega">
                                    <a href="/products/collection/all">전체</a>
                                    <a href="/products/collection/metal"><span class="metal-button">메탈</span>
                                        <img src="/static/images/Logo_img/catemetal.jpg"
                                            class="metal-image image-display" alt="">
                                    </a>
                                    <a href="/products/collection/acetate"><span class="acetate-button">아세테이트</span>
                                        <img src="/static/images/Logo_img/cateacetate.jpg"
                                            class="acetate-image image-display" alt="">
                                    </a>
                                    <a href="/products/collection/combination"><span
                                            class="combination-button">콤비네이션</span>
                                        <img src="/static/images/Logo_img/cateCombination.jpg"
                                            class="combination-image image-display" alt="">
                                    </a>
                                </div>
                                <div class="site-nav-mega site-nav-mega2">
                                    <a href="/products/collection/refined"><span class="refined-button">리파인드</span>
                                        <img src="/static/images/Logo_img/cateRefined.jpg"
                                            class="refined-image image-display" alt="">
                                    </a>
                                    <a href="/products/collection/vintage"><span class="vintage-button">빈티지</span>
                                        <img src="/static/images/Logo_img/cateVintage.jpg"
                                            class="vintage-image image-display" alt="">
                                    </a>
                                    <a href="/products/collection/sunglasses"><span
                                            class="sunglasses-button">선글라스</span>
                                        <img src="/static/images/Logo_img/cateSunglasses.jpg"
                                            class="sunglasses-image image-display" alt="">
                                    </a>
                                    <a href="/products/collection/acc"><span class="acc-button">Acc</span>
                                        <img src="/static/images/Logo_img/cateAcc.jpg" class="acc-image image-display"
                                            alt="">
                                    </a>
                                </div>
                            </nav>
                            <div><a href="/campaign" class="">캠페인</a></div>
                            <div><a href="/journal" class="">저널</a></div>
                            <div><a href="/brand" class="">브랜드</a></div>
                        </div>
                    </div>
                </div>
                <!-- 로고 -->
                <div class="logo-container">
                    <a href="/index"><img src="/static/images/Logo_img/lash_logo.png" alt=""></a>
                </div>
                <div class="header-right-container">
                    <!-- search -->
                    <div class="search-box">
                        <form action="." method="get">
                            <input class="search-text search-display" type="text" placeholder="">
                            <span class="search-button" type="submit">
                                <i class="fas fa-search"></i>
                            </span>
                        </form>
                    </div>
                    <button class="site-header-button">
                        <a href="/account/mypage">My page</a>
                    </button>
                    <button class="site-header-button account-button"></button>
                    <button class="site-header-button basket-button"><a href="/shopping-basket">My Shopping Basket</a>
                        <span class="basket-count">0</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="contents">
        <section class="img-scroll">
            <!-- <img src="/static/images/product_img/Combination_img/Combination_Hunter_C1.jpg">
            <img src="/static/images/product_img/Combination_img/Combination_Hunter_C1.jpg">
            <img src="/static/images/product_img/Combination_img/Combination_Hunter_C1.jpg">
            <img src="/static/images/product_img/Combination_img/Combination_Hunter_C1.jpg"> -->
        </section>

        <section class="sidebar">
            <div class="pd-info">
                <div class="pd-name"></div>
                <div class="pd-price"></div>
                <div class="more-color-text">MORE COLORS</div>
                <div class="more-color">
                    <!-- <a href="#none"><img src="/static/images/product_img/Combination_img/Combination_Hunter_C2.jpg"></a>
                    <a href="#none"><img src="/static/images/product_img/Combination_img/Combination_Hunter_C3.jpg"></a>
                    <a href="#none"><img src="/static/images/product_img/Combination_img/Combination_Hunter_C4.jpg"></a> -->
                </div>


                <div style="width: 100%; height:1.5vh;"></div>
                <div class="btn-area1">
                    <button type="button" class="add-button">ADD TO BAG</button>
                    <button type="button" class="npay-button"><img
                            src="/static/images/lash_btn/payment_icon_yellow_medium.png"></button>
                </div>

                <button type="button" class="buy-now-button">BUY NOW</button>

                <div class="pro-add" id="proAdd">
                    <div class="pro-fea" id="proFea">PRODUCT FEATURES</div>
                    <div class="ex1 invisible">
                        <!-- Material<br>
                    Acetate&amp;β-Titanium<br>
                    Front 137mm | Lens Width 46mm | Lens Heigh 38.4mm | Bridge 24mm | Temple 146mm<br>
                    <br>
                    소재<br>
                    아세테이트&amp;메탈<br>
                    전면길이 137mm | 렌즈가로 46mm | 렌즈세로 38.4mm | 브릿지 24mm | 다리길이 146mm -->
                    </div>

                    <div class="pro-des" id="proDes">DESCRIPTION</div>
                    <div class="ex2 invisible">
                        <!-- <p>Square acetate and titanium combination optical frame. 
                        It features a heavy keyhole bridge and the details applied on  
                        temples and end-piece of the front part. 
                        The frame provides  a comfortable fitting by attaching the nose pad. 
                        The straight  end piece and the gently falling bottom line are harmonized,  
                        and create a unique silhouette.<br>
                    </p><br>
                    스퀘어 쉐입의 콤비네이션 안경테. 
                    아세테이트와 베타티타늄을 결합하여 입체적이고, 
                    부드러운 전면 모서리 엔드피스와 템플에 디테일이 적용되었다. 
                    코패드를 부착하여 안착되는 착용감을 준다. 
                    두꺼운 키홀 브릿지, 곧게 뻗은 엔피스와 완만하게 떨어지는 하단  
                    라인이 조화를 이루며 개성있는 실루엣을 보여준다.<br> -->
                    </div>

                    <div class="r-policy" id="rPolicy">RETURN POLICY</div>
                    <div class="ex3 invisible">
                        1) 배송 지역 : 전국 (도서산간지역 포함)<br>
                        2) 배송 운임 : 기본 무료 배송 (도서산간지역의 경우 추가 배송비가 부과됩니다.)<br>
                        3) 배송 기간 : 결제일 기준 2~4일 (영업일 기준이며, 택배사 사정에 의해 지연이 될 수 있습니다.)<br>
                        4) 해외 배송 기간 : 결제일 기준 4~10일 (영업일 기준이며, 택배사 사정에 의해 지연이 될 수 있습니다.)
                    </div>

                </div>

            </div>
        </section>
    </div>

    <div class="top" id="top">
        <a href="#top" style="padding: 15px 5px 15px 5px; border-radius: 5px;">
            TOP
        </a>
    </div>

    <script src="/static/js/header.js"></script>
    <script src="/static/js/page_product/product_detail.js"></script>

    <script>
        const kbtn = document.querySelector(".npay-button");
        var IMP = window.IMP;
        IMP.init("imp75586747");

        // 함수1. ajax 로 로그인한 유저 정보를 가져온다 . 
        // 근데 배송지 없으면 주문 할 수 없음 . 
        // 정보 성공적으로 가져오면 IMP.request_pay() 실행되도록 //

        // 결제가 실행되면 , 주문번호를 데이터베이스에서 가져와야함. or 날짜 + 고유한 주문번호를 생성해주기

        // 결제 성공시, db에 주문 정보 보냄


        function getMemberInfo() {

            $.ajax({
                async: false,
                type: "get",
                url: "/api/order/member/info",
                // data : (로그인이 되어 있으면 컨트롤러에서 principal 객체를 파라미터로 받아올 수 있음)
                dataType: "json",
                success: (response) => { // response data 에 principal 객체에서 필요한 정보를 담아 서버에서 보내주게 됨
                    impData(response.data);
                    console.log(impData(response.data));
                },
                error: (error) => {
                    alert("회원 로그인 후 구매하실 수 있습니다.");
                }
            });

        }

        function impData(responseData) {
            let impData = {
                buyer_id: responseData.member_id,
                buyer_email: responseData.email,
                buyer_name: responseData.name,
                buyer_tel: responseData.mobile_phone,
                buyer_addr: responseData.address + " " + responseData.address_detail,
                buyer_postcode: responseData.address_number
            }

            return impData;
        }


        kbtn.onclick = () => {

            // 함수1 실행됨
            getMemberInfo();

            // 배송지 정보가 없을 시 결제 되면 안됨. 
            console.log(impData.buyer_addr);

            IMP.request_pay({
                pg: 'kakaopay.TC0ONETIME',   //테스트인경우 kcp.T000
                pay_method: 'card',
                merchant_uid: new Date().getTime(), //상점에서 생성한 고유 주문번호
                name: '주문명:결제테스트',
                amount: 1,
                company: 'lash',//해당 파라미터 설정시 통합결제창에 해당 상호명이 노출됩니다.
                buyer_email: 'address002@naver.com',
                buyer_name: '나갱',
                buyer_tel: '010-9044-2249',
                buyer_addr: '서울특별시 강남구 삼성동',
                buyer_postcode: '123-456',
                language: 'ko', // en 설정시 영문으로 출력되면 해당 파라미터 생략시 한국어 default
                m_redirect_url: '{모바일에서 결제 완료 후 리디렉션 될 URL}'
            }, function (rsp) { // callback 로직
                if (rsp.success) {
                    alert("구매되었습니다. 감사합니다.");
                } else {
                    alert("결제 실패하였습니다. 다시 한 번 시도해 주세요. ");
                }
            });



        }

    </script>
</body>

</html>