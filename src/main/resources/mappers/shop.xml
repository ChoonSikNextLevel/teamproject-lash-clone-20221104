<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lash.lashClone.repository.shop.ShopRepository">

    <resultMap id="product_imgs" type="com.lash.lashClone.domain.ProductImg">
        <result property="id" column="img_id"></result>
        <result property="product_id" column="product_id"></result>
        <result property="img_name" column="img_name"></result>
    </resultMap>

    <resultMap id="product_details" type="com.lash.lashClone.domain.ProductDetail">
        <result property="product_id" column="product_id"></result>
        <result property="name" column="name"></result>
        <result property="color_code" column="color_code"></result>
        <result property="color" column="color"></result>
        <result property="price" column="price"></result>
        <result property="product_features" column="product_features"></result>
        <result property="description" column="description"></result>
        <collection property="product_imgs" javaType="list" resultMap="product_imgs"></collection>
    </resultMap>

    <select id="getProductCollection"
            parameterType="hashmap"
            resultType="com.lash.lashClone.domain.ProductCollection">




    </select>

    <select id="getProduct" resultMap="product_details" parameterType="string">
        SELECT
            pm.name,
            pm.color_code,
            pm.price,
            pm.product_features,
            pm.description,
            pimg.img_name,
            pimg.id
        FROM
            product_mst pm
        LEFT OUTER JOIN product_img pimg ON(pimg.product_id = pm.product_id)
        WHERE
            pm.name = #{name}
    </select>


</mapper>